<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>可编辑的表格</title>
    <link
      rel="stylesheet"
      href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container" id="app">
      <div action="" method="POST" role="form">
        <div class="form-group">
          <label for="">姓名</label>
          <input
            type="text"
            class="form-control"
            v-model="name"
            placeholder="请输入姓名"
          />
        </div>
        <div class="form-group">
          <label for="">年龄</label>
          <input
            type="text"
            class="form-control"
            v-model="age"
            placeholder="请输入年龄"
          />
        </div>
        <div class="form-group">
          <label for="">性别</label>
          <input
            type="text"
            class="form-control"
            v-model="gender"
            placeholder="请输入性别"
          />
        </div>
        <div class="form-group">
          <label for="">技能</label>
          <input
            type="skills"
            class="form-control"
            v-model="skills"
            placeholder="请输入技能"
          />
        </div>
        <button @click="save" class="btn btn-primary">保存</button>
      </div>

      <input
        type="text"
        class="form-control"
        placeholder="请输入关键字"
        v-model="keyword"
      />

      <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr>
            <th>序号</th>
            <th>名字</th>
            <th>性别</th>
            <th>年龄</th>
            <th>技能</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(p, i) in filterPeople">
            <td>{{i+1}}</td>
            <td>
              <input v-show="p.isEdit" v-model="p.name" />
              <span v-show="!p.isEdit">{{p.name}}</span>
            </td>
            <td>
              <input v-show="p.isEdit" v-model="p.gender" />
              <span v-show="!p.isEdit">{{p.gender}}</span>
            </td>
            <td>
              <input v-show="p.isEdit" v-model="p.age" />
              <span v-show="!p.isEdit">{{p.age}}</span>
            </td>
            <td>
              <input v-show="p.isEdit" v-model="p.skills" />
              <span v-show="!p.isEdit">{{p.skills}}</span>
            </td>
            <td>
              <button
                @click="p.isEdit=!p.isEdit"
                v-show="!p.isEdit"
                class="btn btn-primary btn-sm"
              >
                修改
              </button>
              <button
                @click="p.isEdit=!p.isEdit"
                v-show="p.isEdit"
                class="btn btn-danger btn-sm"
              >
                完成
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
      var app = new Vue({
        el: "#app",
        data: {
          keyword: "",
          name: "",
          age: 0,
          gender: "男",
          skills: "",
          people: [
            {
              id: 1,
              name: "张无忌",
              gender: "男",
              age: "22",
              skills: "九阳神功",
              isEdit: false
            },
            {
              id: 2,
              name: "张三丰",
              gender: "男",
              age: "102",
              skills: "太极xxx",
              isEdit: false
            },
            {
              id: 3,
              name: "郭芙蓉",
              gender: "女",
              age: "20",
              skills: "排山倒海",
              isEdit: false
            }
          ]
        },
        methods: {
          save() {
            this.people.push({
              id: Date.now(),
              name: this.name,
              age: this.age,
              gender: this.gender,
              skills: this.skills,
              isEdit: false
            });
          }
        },
        computed: {
          filterPeople() {
            if (this.keyword) {
              return this.people.filter(
                item =>
                  item.name.indexOf(this.keyword) > -1 ||
                  item.skills.indexOf(this.keyword) > -1
              );
            } else {
              return this.people;
            }
          }
        }
      });
    </script>
  </body>
</html>
